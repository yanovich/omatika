%YAML 1.1
---
modules:
 - backplane :
    - 8041
    - 87017 :
      - direct
      - direct
      - direct
      - direct
      - direct
      - direct
    - 8024
    - 8024
    - 8024
    - 87040
    - 87015P :
      - pt1000
      - pt1000
      - pt1000
      - pt1000
      - pt1000
      - pt1000
      - pt1000
processes :
 - relay :
    interval : 200
    IO :
     unblock : di:1:6:9
     no : do:1:1:10
 - relay :
    interval : 200
    IO :
     unblock : di:1:6:14
     no : do:1:1:16
 - relay :
    interval : 200
    IO :
     unblock : di:1:6:19
     no : do:1:1:21
 - relay :
    interval : 200
    IO :
     unblock : di:1:6:24
     no : do:1:1:26
 - relay :
    interval : 200
    setpoints :
     delay : 10
    IO :
     unblock : di:1:6:7
     unblock : di:1:6:5
     unblock : di:1:6:22
     unblock : di:1:6:27
     no : do:1:1:5
 - counter :
    interval : 200
    IO :
     feed : di:1:6:32
 - evaporation :
    interval : 2000
    setpoints :
     overheat : 20
     pressure sensor low : 4086
     pressure sensor high : 20429
     pressure low : 0
     pressure high : 13000
    IO :
     temperature : tr:1:7:6
     pressure : ai:1:2:6
    valve :
     analog :
      setpoints :
       pos : 8000
       low : 0
       high : 8000
      IO :
       output : ao:1:4:3
    fuzzy :
     - {v: 0, f: Z, a: -1500, b: -40, c:  -10} : {f: A, a: -4000, b: -4000, c: -150}
     - {v: 0, f: A, a:   -40, b: -10, c:    0} : {f: A, a:  -180, b:   -50, c:  -20}
     - {v: 0, f: A, a:   -10, b:   0, c:   10} : {f: A, a:   -50, b:     0, c:   50}
     - {v: 0, f: A, a:     0, b:  10, c:   40} : {f: A, a:    20, b:    50, c:  100}
     - {v: 0, f: S, a:    10, b:  40, c: 1500} : {f: A, a:   150, b:  1000, c: 1000}
     - {v: 1, f: Z, a: -1500, b: -40, c:  -10} : {f: A, a: -2000, b: -2000, c: -120}
     - {v: 1, f: A, a:   -20, b:  -5, c:   -1} : {f: A, a:  -100, b:   -50, c:  -20}
     - {v: 1, f: A, a:     1, b:   5, c:   20} : {f: A, a:    20, b:    50, c:  100}
     - {v: 1, f: S, a:    10, b:  40, c: 1500} : {f: A, a:   120, b:  1000, c: 1000}
 - evaporation :
    interval : 2000
    setpoints :
     overheat : 15
     pressure sensor low : 4086
     pressure sensor high : 20429
     pressure low : 0
     pressure high : 13000
    IO :
     temperature : tr:1:7:7
     pressure : ai:1:2:6
    valve :
     analog :
      setpoints :
       pos : 8000
       low : 0
       high : 8000
      IO :
       output : ao:1:5:1
    fuzzy :
     - {v: 0, f: Z, a: -1500, b: -40, c:  -10} : {f: A, a: -4000, b: -4000, c: -150}
     - {v: 0, f: A, a:   -40, b: -10, c:    0} : {f: A, a:  -180, b:   -50, c:  -20}
     - {v: 0, f: A, a:   -10, b:   0, c:   10} : {f: A, a:   -50, b:     0, c:   50}
     - {v: 0, f: A, a:     0, b:  10, c:   40} : {f: A, a:    20, b:    50, c:  100}
     - {v: 0, f: S, a:    10, b:  40, c: 1500} : {f: A, a:   150, b:  1000, c: 1000}
     - {v: 1, f: Z, a: -1500, b: -40, c:  -10} : {f: A, a: -2000, b: -2000, c: -120}
     - {v: 1, f: A, a:   -20, b:  -5, c:   -1} : {f: A, a:  -100, b:   -50, c:  -20}
     - {v: 1, f: A, a:     1, b:   5, c:   20} : {f: A, a:    20, b:    50, c:  100}
     - {v: 1, f: S, a:    10, b:  40, c: 1500} : {f: A, a:   120, b:  1000, c: 1000}
 - hot water :
    setpoints :
     feed : 12500
    IO :
     feed : ai:1:2:5
    valve :
     analog :
      setpoints :
       pos : 0
       low : 0
       high : 8000
      IO :
       output : ao:1:4:4
    fuzzy :
     - {v: 0, f: Z, a: -1500, b: -500, c: -250} : {f: A, a: -2000, b: -2000, c: -150}
     - {v: 0, f: A, a:  -500, b: -250, c:    0} : {f: A, a:  -150, b:   -80, c:  -50}
     - {v: 0, f: A, a:  -250, b:    0, c:  250} : {f: A, a:  -200, b:     0, c:  200}
     - {v: 0, f: A, a:     0, b:  250, c:  500} : {f: A, a:    50, b:    80, c:  150}
     - {v: 0, f: S, a:   250, b:  500, c: 1500} : {f: A, a:   150, b:  2000, c: 2000}
     - {v: 1, f: Z, a: -1500, b: -500, c: -250} : {f: A, a: -1500, b: -1500, c: -120}
     - {v: 1, f: A, a:  -500, b: -350, c: -200} : {f: A, a:  -150, b:   -80, c:  -50}
     - {v: 1, f: A, a:   200, b:  350, c:  500} : {f: A, a:    50, b:    80, c:  150}
     - {v: 1, f: S, a:   250, b:  500, c: 1500} : {f: A, a:   120, b:  1500, c: 1500}
